ch1,ch2,ch3,ch4 = ATLAS 4l
ch5,ch6,ch7 = ATLAS 2l2nu
mu,el,elmu = CMS 4l

values of uncertainties are all written in the datacard and used from there (not using *Up and *Down histos from input root files!)

There is one difference in uncertainties when running for ATLAS limits and ATLAS+CMS limits. Form ATLAS limits reco_uncertainty and th_uncertainty are summed in quadrature and used as a single uncertainty. These two are splitted when running ATLAS+CMS combination because we want to correlate th_uncertainty between CMS and ATLAS.

/////////////////////////////////////////////
//
//		f4: lnN
//


// lnN CMS only:
python buildWZworkspace_f4_ATLASCMSforComb_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_CMS_4l

rm wv_semil_CMScomb_f4_lnN.txt
combineCards.py wv_semil_muboosted.txt wv_semil_elboosted.txt wv_semil_elmuboosted.txt > wv_semil_CMScomb_f4_lnN.txt
cp wv_semil_CMScomb_f4_lnN.txt wv_semil_CMScomb_f4_adjustedUnc_lnN.txt
text2workspace.py -m 126 wv_semil_CMScomb_f4_adjustedUnc_lnN.txt -o Example_CMScomb_f4_adjustedUnc_lnN.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc_f4:dkglZModel_wz_adjustedUnc_f4 --PO channels=mu,el,elmu --PO range_dkg=-0.02,0.02 --PO range_lZ=-0.02,0.02

combine Example_CMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_lnN.root
combine Example_CMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_lnN.root

combine Example_CMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_lnN_exp.root
combine Example_CMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_lnN_exp.root

combine Example_CMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_lnN_onUnc.root
combine Example_CMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_lnN_onUnc.root

combine Example_CMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_lnN_onUnc_exp.root
combine Example_CMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_lnN_onUnc_exp.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_lnN.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_lnN.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_lnN_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_lnN_exp.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_lnN_onUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_lnN_onUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_lnN_onUnc_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_lnN_onUnc_exp.root dkg


// lnN ATLAS 2l2nu only:
python buildWZworkspace_f4_ATLAS_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_ATLAS_2l2nu_less1sigmaInputForNegativeSystBkgDD
rm wv_semil_ch5to7combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt
combineCards.py wv_semil_ch5boosted.txt wv_semil_ch6boosted.txt wv_semil_ch7boosted.txt > wv_semil_ch5to7combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt
text2workspace.py -m 126 wv_semil_ch5to7combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt -o Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc_f4:dkglZModel_wz_adjustedUnc_f4 --PO channels=ch5,ch6,ch7 --PO range_lZ=-0.02,0.02 --PO range_dkg=-0.02,0.02

combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_f4_adjustedUnc_lnN.root
combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_f4_adjustedUnc_lnN.root

combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_f4_adjustedUnc_exp_lnN.root
combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_f4_adjustedUnc_exp_lnN.root

combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_f4_adjustedUnc_lnN_noUnc.root
combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_f4_adjustedUnc_lnN_noUnc.root

combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_f4_adjustedUnc_exp_lnN_noUnc.root
combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_f4_adjustedUnc_exp_lnN_noUnc.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_f4_adjustedUnc_lnN.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_f4_adjustedUnc_lnN.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_f4_adjustedUnc_exp_lnN.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_f4_adjustedUnc_exp_lnN.root dkg

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_f4_adjustedUnc_lnN_noUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_f4_adjustedUnc_lnN_noUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_f4_adjustedUnc_exp_lnN_noUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_f4_adjustedUnc_exp_lnN_noUnc.root dkg

// lnN ATLAS 4l only:
python buildWZworkspace_f4_ATLAS_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_ATLAS_4l_less1sigmaInputForNegativeSystBkgDD
rm wv_semil_ch1to4combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt
combineCards.py wv_semil_ch1boosted.txt wv_semil_ch2boosted.txt wv_semil_ch3boosted.txt wv_semil_ch4boosted.txt > wv_semil_ch1to4combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt
text2workspace.py -m 126 wv_semil_ch1to4combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt -o Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc_f4:dkglZModel_wz_adjustedUnc_f4 --PO channels=ch1,ch2,ch3,ch4

combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_dkg_less1sigmaInputForNegativeSystBkgDD_lnN.root
combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_lZ_less1sigmaInputForNegativeSystBkgDD_lnN.root
combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_dkg_less1sigmaInputForNegativeSystBkgDD_lnN_noUnc.root
combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_lZ_less1sigmaInputForNegativeSystBkgDD_lnN_noUnc.root
combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_dkg_less1sigmaInputForNegativeSystBkgDD_exp_lnN.root
combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_lZ_less1sigmaInputForNegativeSystBkgDD_exp_lnN.root
combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_dkg_less1sigmaInputForNegativeSystBkgDD_exp_lnN_noUnc.root
combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_lZ_less1sigmaInputForNegativeSystBkgDD_exp_lnN_noUnc.root

python build1DInterval_lZ.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_lZ_less1sigmaInputForNegativeSystBkgDD_lnN.root lZ
python build1DInterval_dkg.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_dkg_less1sigmaInputForNegativeSystBkgDD_lnN.root dkg
python build1DInterval_lZ.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_lZ_less1sigmaInputForNegativeSystBkgDD_lnN_noUnc.root lZ
python build1DInterval_dkg.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_dkg_less1sigmaInputForNegativeSystBkgDD_lnN_noUnc.root dkg
python build1DInterval_lZ.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_lZ_less1sigmaInputForNegativeSystBkgDD_exp_lnN.root lZ
python build1DInterval_dkg.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_dkg_less1sigmaInputForNegativeSystBkgDD_exp_lnN.root dkg
python build1DInterval_lZ.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_lZ_less1sigmaInputForNegativeSystBkgDD_exp_lnN_noUnc.root lZ
python build1DInterval_dkg.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f4_1D_dkg_less1sigmaInputForNegativeSystBkgDD_exp_lnN_noUnc.root dkg

// lnN ATLAS 2l2nu+4l only:
python buildWZworkspace_f4_ATLAS_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_ATLAS_4l_less1sigmaInputForNegativeSystBkgDD
python buildWZworkspace_f4_ATLAS_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_ATLAS_2l2nu_less1sigmaInputForNegativeSystBkgDD
// OR:
python buildWZworkspace_f4_ATLAS_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_ATLAS_4l_2l2nu_less1sigmaInputForNegativeSystBkgDD_forComb

rm wv_semil_ch1to7combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt
combineCards.py wv_semil_ch1boosted.txt wv_semil_ch2boosted.txt wv_semil_ch3boosted.txt wv_semil_ch4boosted.txt wv_semil_ch5boosted.txt wv_semil_ch6boosted.txt wv_semil_ch7boosted.txt > wv_semil_ch1to7combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt
text2workspace.py -m 126 wv_semil_ch1to7combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt -o Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc_f4:dkglZModel_wz_adjustedUnc_f4 --PO channels=ch1,ch2,ch3,ch4,ch5,ch6,ch7

combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_lnN.root
combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_lnN.root

combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_exp_lnN.root
combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_exp_lnN.root

combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_lnN_noUnc.root
combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_lnN_noUnc.root

combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_exp_lnN_noUnc.root
combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_exp_lnN_noUnc.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_lnN.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_lnN.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_exp_lnN.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_exp_lnN.root dkg

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_lnN_noUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_lnN_noUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_exp_lnN_noUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAS_2l2nu_4l_f4_adjustedUnc_exp_lnN_noUnc.root dkg


// lnN all ATLAS+CMS
python buildWZworkspace_f4_ATLASCMSforComb_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_CMS_4l
python buildWZworkspace_f4_ATLASCMSforComb_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_ATLAS_4l_2l2nu_less1sigmaInputForNegativeSystBkgDD_forComb

rm wv_semil_ATLASCMScomb_f4_lnN.txt
combineCards.py wv_semil_ch1boosted.txt wv_semil_ch2boosted.txt wv_semil_ch3boosted.txt wv_semil_ch4boosted.txt wv_semil_ch5boosted.txt wv_semil_ch6boosted.txt wv_semil_ch7boosted.txt wv_semil_muboosted.txt wv_semil_elboosted.txt wv_semil_elmuboosted.txt > wv_semil_ATLASCMScomb_f4_lnN.txt
cp wv_semil_ATLASCMScomb_f4_lnN.txt wv_semil_ATLASCMScomb_f4_adjustedUnc_lnN.txt
text2workspace.py -m 126 wv_semil_ATLASCMScomb_f4_adjustedUnc_lnN.txt -o Example_ATLASCMScomb_f4_adjustedUnc_lnN.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc_f4:dkglZModel_wz_adjustedUnc_f4 --PO channels=ch1,ch2,ch3,ch4,ch5,ch6,ch7,mu,el,elmu --PO range_dkg=-0.02,0.02 --PO range_lZ=-0.02,0.02

combine Example_ATLASCMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_lnN.root
combine Example_ATLASCMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_lnN.root
combine Example_ATLASCMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_lnN_exp.root
combine Example_ATLASCMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_lnN_exp.root

combine Example_ATLASCMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_lnN_onUnc.root
combine Example_ATLASCMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_lnN_onUnc.root

combine Example_ATLASCMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_lnN_onUnc_exp.root
combine Example_ATLASCMScomb_f4_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_lnN_onUnc_exp.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_lnN.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_lnN.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_lnN_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_lnN_exp.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_lnN_onUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_lnN_onUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_lnN_onUnc_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_lnN_onUnc_exp.root dkg


/////////////////////////////////////////////
//
//		f5: lnN
//

// lnN CMS only:

python buildWZworkspace_f5_ATLASCMSforComb_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_CMS_4l
rm wv_semil_CMScomb_f5_lnN.txt
combineCards.py wv_semil_muboosted.txt wv_semil_elboosted.txt wv_semil_elmuboosted.txt > wv_semil_CMScomb_f5_lnN.txt
cp wv_semil_CMScomb_f5_lnN.txt wv_semil_CMScomb_f5_adjustedUnc_lnN.txt
text2workspace.py -m 126 wv_semil_CMScomb_f5_adjustedUnc_lnN.txt -o Example_CMScomb_f5_adjustedUnc_lnN.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc:dkglZModel_wz_adjustedUnc --PO channels=mu,el,elmu --PO range_dkg=-0.02,0.02 --PO range_lZ=-0.02,0.02

combine Example_CMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_lnN.root
combine Example_CMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_lnN.root

combine Example_CMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_lnN_exp.root
combine Example_CMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_lnN_exp.root

combine Example_CMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_lnN_onUnc.root
combine Example_CMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_lnN_onUnc.root

combine Example_CMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_lnN_onUnc_exp.root
combine Example_CMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_lnN_onUnc_exp.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_lnN.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_lnN.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_lnN_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_lnN_exp.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_lnN_onUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_lnN_onUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_lnN_onUnc_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_lnN_onUnc_exp.root dkg

// lnN ATLAS 2l2nu+4l only:

python buildWZworkspace_f5_ATLAS_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_ATLAS_4l_less1sigmaInputForNegativeSystBkgDD
python buildWZworkspace_f5_ATLAS_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_ATLAS_2l2nu_less1sigmaInputForNegativeSystBkgDD
// or:
python buildWZworkspace_f5_ATLAS_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_ATLAS_4l_2l2nu_less1sigmaInputForNegativeSystBkgDD_forComb

rm wv_semil_ch1to7combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt
combineCards.py wv_semil_ch1boosted.txt wv_semil_ch2boosted.txt wv_semil_ch3boosted.txt wv_semil_ch4boosted.txt wv_semil_ch5boosted.txt wv_semil_ch6boosted.txt wv_semil_ch7boosted.txt > wv_semil_ch1to7combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt
text2workspace.py -m 126 wv_semil_ch1to7combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt -o Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc:dkglZModel_wz_adjustedUnc --PO channels=ch1,ch2,ch3,ch4,ch5,ch6,ch7

combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_lnN.root
combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_lnN.root

combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_exp_lnN.root
combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_exp_lnN.root

combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_lnN_noUnc.root
combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_lnN_noUnc.root

combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_exp_lnN_noUnc.root
combine Example_ATLAS_1to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_exp_lnN_noUnc.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_lnN.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_lnN.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_exp_lnN.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_exp_lnN.root dkg

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_lnN_noUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_lnN_noUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_exp_lnN_noUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAS_2l2nu_4l_f5_adjustedUnc_exp_lnN_noUnc.root dkg


// lnN ATLAS 4l only:

python buildWZworkspace_f5_ATLAS_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_ATLAS_4l_less1sigmaInputForNegativeSystBkgDD

rm wv_semil_ch1to4combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt
combineCards.py wv_semil_ch1boosted.txt wv_semil_ch2boosted.txt wv_semil_ch3boosted.txt wv_semil_ch4boosted.txt > wv_semil_ch1to4combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt
text2workspace.py -m 126 wv_semil_ch1to4combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt -o Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc:dkglZModel_wz_adjustedUnc --PO channels=ch1,ch2,ch3,ch4

combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_lnN.root
combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_lnN.root
combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_lnN_noUnc.root
combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_lnN_noUnc.root
combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_exp_lnN.root
combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_exp_lnN.root
combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_exp_lnN_noUnc.root
combine Example_ATLAS_1to4_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_exp_lnN_noUnc.root

python build1DInterval_lZ.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_lnN.root lZ
python build1DInterval_dkg.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_lnN.root dkg
python build1DInterval_lZ.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_lnN_noUnc.root lZ
python build1DInterval_dkg.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_lnN_noUnc.root dkg
python build1DInterval_lZ.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_exp_lnN.root lZ
python build1DInterval_dkg.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_exp_lnN.root dkg
python build1DInterval_lZ.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_exp_lnN_noUnc.root lZ
python build1DInterval_dkg.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l4_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_exp_lnN_noUnc.root dkg

// lnN ATLAS 2l2nu only:

python buildWZworkspace_f5_ATLAS_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_ATLAS_2l2nu_less1sigmaInputForNegativeSystBkgDD

rm wv_semil_ch5to7combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt
combineCards.py wv_semil_ch5boosted.txt wv_semil_ch6boosted.txt wv_semil_ch7boosted.txt > wv_semil_ch5to7combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt
text2workspace.py -m 126 wv_semil_ch5to7combined_less1sigmaInputForNegativeSystBkgDD_lnN.txt -o Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc:dkglZModel_wz_adjustedUnc --PO channels=ch5,ch6,ch7

combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_lnN.root
combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_lnN.root
combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_lnN_noUnc.root
combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_lnN_noUnc.root
combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_exp_lnN.root
combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_exp_lnN.root
combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_exp_lnN_noUnc.root
combine Example_ATLAS_5to7_workspace_less1sigmaInputForNegativeSystBkgDD_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_exp_lnN_noUnc.root

python build1DInterval_lZ.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_lnN.root lZ
python build1DInterval_dkg.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_lnN.root dkg
python build1DInterval_lZ.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_lnN_noUnc.root lZ
python build1DInterval_dkg.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_lnN_noUnc.root dkg
python build1DInterval_lZ.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_exp_lnN.root lZ
python build1DInterval_dkg.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_exp_lnN.root dkg
python build1DInterval_lZ.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_lZ_less1sigmaInputForNegativeSystBkgDD_exp_lnN_noUnc.root lZ
python build1DInterval_dkg.py -0.025 0.025 higgsCombineTest.MultiDimFit.mH120_ATLAS_l2nu2_f5_1D_dkg_less1sigmaInputForNegativeSystBkgDD_exp_lnN_noUnc.root dkg

// lnN ATLAS+CMS
python buildWZworkspace_f5_ATLASCMSforComb_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_CMS_4l
python buildWZworkspace_f5_ATLASCMSforComb_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_lnNall_UpOnly.py --config=config_ZZ_ATLAS_4l_2l2nu_less1sigmaInputForNegativeSystBkgDD_forComb

rm wv_semil_ATLASCMScomb_f5.txt
combineCards.py wv_semil_ch1boosted.txt wv_semil_ch2boosted.txt wv_semil_ch3boosted.txt wv_semil_ch4boosted.txt wv_semil_ch5boosted.txt wv_semil_ch6boosted.txt wv_semil_ch7boosted.txt wv_semil_muboosted.txt wv_semil_elboosted.txt wv_semil_elmuboosted.txt > wv_semil_ATLASCMScomb_f5.txt
cp wv_semil_ATLASCMScomb_f5.txt wv_semil_ATLASCMScomb_f5_adjustedUnc.txt
text2workspace.py -m 126 wv_semil_ATLASCMScomb_f5_adjustedUnc.txt -o Example_ATLASCMScomb_f5_adjustedUnc_lnN.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc:dkglZModel_wz_adjustedUnc --PO channels=ch1,ch2,ch3,ch4,ch5,ch6,ch7,mu,el,elmu --PO range_dkg=-0.015,0.015 --PO range_lZ=-0.015,0.015

combine Example_ATLASCMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_lnN.root
combine Example_ATLASCMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_lnN.root
combine Example_ATLASCMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_lnN_noUnc.root
combine Example_ATLASCMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_lnN_noUnc.root
combine Example_ATLASCMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_lnN_exp.root
combine Example_ATLASCMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_lnN_exp.root
combine Example_ATLASCMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_lnN_noUnc_exp.root
combine Example_ATLASCMScomb_f5_adjustedUnc_lnN.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_lnN_noUnc_exp.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_lnN.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_lnN.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_lnN_noUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_lnN_noUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_lnN_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_lnN_exp.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_lnN_noUnc_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_lnN_noUnc_exp.root dkg


/////////////////////////////////////////////
//
//		f4: trG
//

// trG ATLAS+CMS

python buildWZworkspace_f4_ATLASCMSforComb_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_trGall_UpOnly.py --config=config_ZZ_CMS_4l
python buildWZworkspace_f4_ATLASCMSforComb_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_trGall_UpOnly.py --config=config_ZZ_ATLAS_4l_2l2nu_less1sigmaInputForNerm wv_semil_ATLASCMScomb_f4_trG.txt
combineCards.py wv_semil_ch1boosted.txt wv_semil_ch2boosted.txt wv_semil_ch3boosted.txt wv_semil_ch4boosted.txt wv_semil_ch5boosted.txt wv_semil_ch6boosted.txt wv_semil_ch7boosted.txt wv_semil_muboosted.txt wv_semil_elboosted.txt wv_semil_elmuboosted.txt > wv_semil_ATLASCMScomb_f4_trG.txt
cp wv_semil_ATLASCMScomb_f4_trG.txt wv_semil_ATLASCMScomb_f4_adjustedUnc_trG.txt
text2workspace.py -m 126 wv_semil_ATLASCMScomb_f4_adjustedUnc_trG.txt -o Example_ATLASCMScomb_f4_adjustedUnc_trG.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc_f4:dkglZModel_wz_adjustedUnc_f4 --PO channels=ch1,ch2,ch3,ch4,ch5,ch6,ch7,mu,el,elmu --PO range_dkg=-0.02,0.02 --PO range_lZ=-0.02,0.02

combine Example_ATLASCMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_trG.root
combine Example_ATLASCMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_trG.root
combine Example_ATLASCMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_trG_exp.root
combine Example_ATLASCMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_trG_exp.root

combine Example_ATLASCMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_trG_onUnc.root
combine Example_ATLASCMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_trG_onUnc.root

combine Example_ATLASCMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_trG_onUnc_exp.root
combine Example_ATLASCMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_trG_onUnc_exp.root


python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_trG.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_trG.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_trG_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_trG_exp.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_trG_onUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_trG_onUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLASCMScomb_f4_adjustedUnc_trG_onUnc_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLASCMScomb_f4_adjustedUnc_trG_onUnc_exp.root dkg




// trG CMS 4l only

python buildWZworkspace_f4_ATLASCMSforComb_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_trGall_UpOnly.py --config=config_ZZ_CMS_4l

rm wv_semil_CMScomb_f4_trG.txt
combineCards.py wv_semil_muboosted.txt wv_semil_elboosted.txt wv_semil_elmuboosted.txt > wv_semil_CMScomb_f4_trG.txt
cp wv_semil_CMScomb_f4_trG.txt wv_semil_CMScomb_f4_adjustedUnc_trG.txt
text2workspace.py -m 126 wv_semil_CMScomb_f4_adjustedUnc_trG.txt -o Example_CMScomb_f4_adjustedUnc_trG.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc_f4:dkglZModel_wz_adjustedUnc_f4 --PO channels=mu,el,elmu --PO range_dkg=-0.02,0.02 --PO range_lZ=-0.02,0.02

combine Example_CMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_trG.root
combine Example_CMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_trG.root

combine Example_CMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_trG_exp.root
combine Example_CMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_trG_exp.root

combine Example_CMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_trG_onUnc.root
combine Example_CMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_trG_onUnc.root

combine Example_CMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_trG_onUnc_exp.root
combine Example_CMScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_trG_onUnc_exp.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_trG.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_trG.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_trG_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_trG_exp.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_trG_onUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_trG_onUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_CMScomb_f4_adjustedUnc_trG_onUnc_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_CMScomb_f4_adjustedUnc_trG_onUnc_exp.root dkg


// trG ATLAS 4l+2l2nu only

python buildWZworkspace_f4_ATLAS_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_trG_UpOnly.py --config=config_ZZ_ATLAS_4l_2l2nu_less1sigmaInputForNegativeSystBkgDD_forComb
rm wv_semil_ATLAScomb_f4_trG.txt
combineCards.py wv_semil_ch1boosted.txt wv_semil_ch2boosted.txt wv_semil_ch3boosted.txt wv_semil_ch4boosted.txt wv_semil_ch5boosted.txt wv_semil_ch6boosted.txt wv_semil_ch7boosted.txt > wv_semil_ATLAScomb_f4_trG.txt
cp wv_semil_ATLAScomb_f4_trG.txt wv_semil_ATLAScomb_f4_adjustedUnc_trG.txt
text2workspace.py -m 126 wv_semil_ATLAScomb_f4_adjustedUnc_trG.txt -o Example_ATLAScomb_f4_adjustedUnc_trG.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc_f4:dkglZModel_wz_adjustedUnc_f4 --PO channels=ch1,ch2,ch3,ch4,ch5,ch6,ch7 --PO range_dkg=-0.02,0.02 --PO range_lZ=-0.02,0.02

combine Example_ATLAScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_adjustedUnc_trG.root
combine Example_ATLAScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_adjustedUnc_trG.root

combine Example_ATLAScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_adjustedUnc_trG_exp.root
combine Example_ATLAScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_adjustedUnc_trG_exp.root

combine Example_ATLAScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_adjustedUnc_trG_onUnc.root
combine Example_ATLAScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_adjustedUnc_trG_onUnc.root

combine Example_ATLAScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_adjustedUnc_trG_onUnc_exp.root
combine Example_ATLAScomb_f4_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_adjustedUnc_trG_onUnc_exp.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_adjustedUnc_trG.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_adjustedUnc_trG.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_adjustedUnc_trG_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_adjustedUnc_trG_exp.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_adjustedUnc_trG_onUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_adjustedUnc_trG_onUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_adjustedUnc_trG_onUnc_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_adjustedUnc_trG_onUnc_exp.root dkg


// trG ATLAS 4l only

rm wv_semil_ATLAScomb_f4_4l_trG.txt
combineCards.py wv_semil_ch1boosted.txt wv_semil_ch2boosted.txt wv_semil_ch3boosted.txt wv_semil_ch4boosted.txt > wv_semil_ATLAScomb_f4_4l_trG.txt
cp wv_semil_ATLAScomb_f4_4l_trG.txt wv_semil_ATLAScomb_f4_4l_adjustedUnc_trG.txt
text2workspace.py -m 126 wv_semil_ATLAScomb_f4_4l_adjustedUnc_trG.txt -o Example_ATLAScomb_f4_4l_adjustedUnc_trG.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc_f4:dkglZModel_wz_adjustedUnc_f4 --PO channels=ch1,ch2,ch3,ch4 --PO range_dkg=-0.02,0.02 --PO range_lZ=-0.02,0.02

combine Example_ATLAScomb_f4_4l_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_4l_adjustedUnc_trG.root
combine Example_ATLAScomb_f4_4l_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_4l_adjustedUnc_trG.root

combine Example_ATLAScomb_f4_4l_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_4l_adjustedUnc_trG_exp.root
combine Example_ATLAScomb_f4_4l_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_4l_adjustedUnc_trG_exp.root

combine Example_ATLAScomb_f4_4l_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_4l_adjustedUnc_trG_onUnc.root
combine Example_ATLAScomb_f4_4l_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_4l_adjustedUnc_trG_onUnc.root

combine Example_ATLAScomb_f4_4l_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_4l_adjustedUnc_trG_onUnc_exp.root
combine Example_ATLAScomb_f4_4l_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_4l_adjustedUnc_trG_onUnc_exp.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_4l_adjustedUnc_trG.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_4l_adjustedUnc_trG.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_4l_adjustedUnc_trG_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_4l_adjustedUnc_trG_exp.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_4l_adjustedUnc_trG_onUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_4l_adjustedUnc_trG_onUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_4l_adjustedUnc_trG_onUnc_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_4l_adjustedUnc_trG_onUnc_exp.root dkg


// trG ATLAS 2l2nu only

rm wv_semil_ATLAScomb_f4_2l2nu_trG.txt
combineCards.py wv_semil_ch5boosted.txt wv_semil_ch6boosted.txt wv_semil_ch7boosted.txt > wv_semil_ATLAScomb_f4_2l2nu_trG.txt
cp wv_semil_ATLAScomb_f4_2l2nu_trG.txt wv_semil_ATLAScomb_f4_2l2nu_adjustedUnc_trG.txt
text2workspace.py -m 126 wv_semil_ATLAScomb_f4_2l2nu_adjustedUnc_trG.txt -o Example_ATLAScomb_f4_2l2nu_adjustedUnc_trG.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc_f4:dkglZModel_wz_adjustedUnc_f4 --PO channels=ch5,ch6,ch7 --PO range_dkg=-0.02,0.02 --PO range_lZ=-0.02,0.02

combine Example_ATLAScomb_f4_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG.root
combine Example_ATLAScomb_f4_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG.root

combine Example_ATLAScomb_f4_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG_exp.root
combine Example_ATLAScomb_f4_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG_exp.root

combine Example_ATLAScomb_f4_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG_onUnc.root
combine Example_ATLAScomb_f4_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG_onUnc.root

combine Example_ATLAScomb_f4_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG_onUnc_exp.root
combine Example_ATLAScomb_f4_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG_onUnc_exp.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG_exp.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG_onUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG_onUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4z_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG_onUnc_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f4g_1D_ATLAScomb_f4_2l2nu_adjustedUnc_trG_onUnc_exp.root dkg


/////////////////////////////////////////////
//
//		f5: trG
//

// trG ATLAS+CMS

python buildWZworkspace_f5_ATLASCMSforComb_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_trGall_UpOnly.py --config=config_ZZ_CMS_4l
python buildWZworkspace_f5_ATLASCMSforComb_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_trGall_UpOnly.py --config=config_ZZ_ATLAS_4l_2l2nu_less1sigmaInputForNegativeSystBkgDD_forComb

rm wv_semil_ATLASCMScomb_f5_trG.txt
combineCards.py wv_semil_ch1boosted.txt wv_semil_ch2boosted.txt wv_semil_ch3boosted.txt wv_semil_ch4boosted.txt wv_semil_ch5boosted.txt wv_semil_ch6boosted.txt wv_semil_ch7boosted.txt wv_semil_muboosted.txt wv_semil_elboosted.txt wv_semil_elmuboosted.txt > wv_semil_ATLASCMScomb_f5_trG.txt
cp wv_semil_ATLASCMScomb_f5_trG.txt wv_semil_ATLASCMScomb_f5_adjustedUnc_trG.txt
text2workspace.py -m 126 wv_semil_ATLASCMScomb_f5_adjustedUnc_trG.txt -o Example_ATLASCMScomb_f5_adjustedUnc_trG.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc:dkglZModel_wz_adjustedUnc --PO channels=ch1,ch2,ch3,ch4,ch5,ch6,ch7,mu,el,elmu --PO range_dkg=-0.015,0.015 --PO range_lZ=-0.015,0.015

combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_exp.root
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_exp.root

combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_noUnc.root
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_noUnc.root

combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_exp_noUnc.root
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_exp_noUnc.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_exp.root dkg

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_noUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_noUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_exp_noUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_exp_noUnc.root dkg


// trG CMS 4l only

python buildWZworkspace_f5_ATLASCMSforComb_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_trGall_UpOnly.py --config=config_ZZ_CMS_4l

rm wv_semil_CMScomb_f5_trG.txt
combineCards.py wv_semil_muboosted.txt wv_semil_elboosted.txt wv_semil_elmuboosted.txt > wv_semil_CMScomb_f5_trG.txt
cp wv_semil_CMScomb_f5_trG.txt wv_semil_CMScomb_f5_adjustedUnc_trG.txt
text2workspace.py -m 126 wv_semil_CMScomb_f5_adjustedUnc_trG.txt -o Example_CMScomb_f5_adjustedUnc_trG.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc:dkglZModel_wz_adjustedUnc --PO channels=mu,el,elmu --PO range_dkg=-0.02,0.02 --PO range_lZ=-0.02,0.02

combine Example_CMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_trG.root
combine Example_CMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_trG.root

combine Example_CMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_trG_exp.root
combine Example_CMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_trG_exp.root

combine Example_CMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_trG_onUnc.root
combine Example_CMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_trG_onUnc.root

combine Example_CMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_trG_onUnc_exp.root
combine Example_CMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_trG_onUnc_exp.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_trG.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_trG.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_trG_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_trG_exp.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_trG_onUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_trG_onUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_CMScomb_f5_adjustedUnc_trG_onUnc_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_CMScomb_f5_adjustedUnc_trG_onUnc_exp.root dkg



// trG ATLAS 4l+2l2nu only

python buildWZworkspace_f5_ATLAS_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_trG_UpOnly.py --config=config_ZZ_ATLAS_4l_2l2nu_less1sigmaInputForNegativeSystBkgDD_forComb
rm wv_semil_ATLAS_f5_trG.txt
combineCards.py wv_semil_ch1boosted.txt wv_semil_ch2boosted.txt wv_semil_ch3boosted.txt wv_semil_ch4boosted.txt wv_semil_ch5boosted.txt wv_semil_ch6boosted.txt wv_semil_ch7boosted.txt > wv_semil_ATLAS_f5_trG.txt
text2workspace.py -m 126 wv_semil_ATLAS_f5_trG.txt -o Example_ATLAS_f5_adjustedUnc_trG.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc:dkglZModel_wz_adjustedUnc --PO channels=ch1,ch2,ch3,ch4,ch5,ch6,ch7 --PO range_dkg=-0.015,0.015 --PO range_lZ=-0.015,0.015

combine Example_ATLAS_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_adjustedUnc_trG.root
combine Example_ATLAS_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_adjustedUnc_trG.root

combine Example_ATLAS_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_adjustedUnc_trG_exp.root
combine Example_ATLAS_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_adjustedUnc_trG_exp.root

combine Example_ATLAS_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_adjustedUnc_trG_onUnc.root
combine Example_ATLAS_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_adjustedUnc_trG_onUnc.root

combine Example_ATLAS_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_adjustedUnc_trG_onUnc_exp.root
combine Example_ATLAS_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_adjustedUnc_trG_onUnc_exp.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_adjustedUnc_trG.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_adjustedUnc_trG.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_adjustedUnc_trG_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_adjustedUnc_trG_exp.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_adjustedUnc_trG_onUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_adjustedUnc_trG_onUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_adjustedUnc_trG_onUnc_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_adjustedUnc_trG_onUnc_exp.root dkg


// trG ATLAS 4l only

rm wv_semil_ATLAS_f5_4l_trG.txt
combineCards.py wv_semil_ch1boosted.txt wv_semil_ch2boosted.txt wv_semil_ch3boosted.txt wv_semil_ch4boosted.txt > wv_semil_ATLAS_f5_4l_trG.txt
text2workspace.py -m 126 wv_semil_ATLAS_f5_4l_trG.txt -o Example_ATLAS_f5_4l_adjustedUnc_trG.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc:dkglZModel_wz_adjustedUnc --PO channels=ch1,ch2,ch3,ch4 --PO range_dkg=-0.02,0.02 --PO range_lZ=-0.02,0.02

combine Example_ATLAS_f5_4l_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_4l_adjustedUnc_trG.root
combine Example_ATLAS_f5_4l_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_4l_adjustedUnc_trG.root

combine Example_ATLAS_f5_4l_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_4l_adjustedUnc_trG_exp.root
combine Example_ATLAS_f5_4l_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_4l_adjustedUnc_trG_exp.root

combine Example_ATLAS_f5_4l_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_4l_adjustedUnc_trG_onUnc.root
combine Example_ATLAS_f5_4l_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_4l_adjustedUnc_trG_onUnc.root

combine Example_ATLAS_f5_4l_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_4l_adjustedUnc_trG_onUnc_exp.root
combine Example_ATLAS_f5_4l_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_4l_adjustedUnc_trG_onUnc_exp.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_4l_adjustedUnc_trG.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_4l_adjustedUnc_trG.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_4l_adjustedUnc_trG_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_4l_adjustedUnc_trG_exp.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_4l_adjustedUnc_trG_onUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_4l_adjustedUnc_trG_onUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_4l_adjustedUnc_trG_onUnc_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_4l_adjustedUnc_trG_onUnc_exp.root dkg


// trG ATLAS 2l2nu only

rm wv_semil_ATLAS_f5_2l2nu_trG.txt
combineCards.py wv_semil_ch5boosted.txt wv_semil_ch6boosted.txt wv_semil_ch7boosted.txt > wv_semil_ATLAS_f5_2l2nu_trG.txt
text2workspace.py -m 126 wv_semil_ATLAS_f5_2l2nu_trG.txt -o Example_ATLAS_f5_2l2nu_adjustedUnc_trG.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc:dkglZModel_wz_adjustedUnc --PO channels=ch5,ch6,ch7 --PO range_dkg=-0.02,0.02 --PO range_lZ=-0.02,0.02

combine Example_ATLAS_f5_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG.root
combine Example_ATLAS_f5_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG.root

combine Example_ATLAS_f5_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG_exp.root
combine Example_ATLAS_f5_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG_exp.root

combine Example_ATLAS_f5_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG_onUnc.root
combine Example_ATLAS_f5_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG_onUnc.root

combine Example_ATLAS_f5_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG_onUnc_exp.root
combine Example_ATLAS_f5_2l2nu_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 -t -1 --expectSignal=1 -S 0
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG_onUnc_exp.root

python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG_exp.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG_onUnc.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG_onUnc.root dkg
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG_onUnc_exp.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLAScomb_f5_2l2nu_adjustedUnc_trG_onUnc_exp.root dkg

////////////////////////////////////////////
//
// plugging in uncertainties one by one:
//

python buildWZworkspace_f5_ATLASCMSforComb_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_trGall_UpOnly.py --config=config_ZZ_CMS_4l
python buildWZworkspace_f5_ATLASCMSforComb_signalShapeFix_less1sigmaInputForNegativeSystBkgDD_trGall_UpOnly.py --config=config_ZZ_ATLAS_4l_2l2nu_less1sigmaInputForNegativeSystBkgDD_forComb

rm wv_semil_ATLASCMScomb_f5_trG.txt
combineCards.py wv_semil_ch1boosted.txt wv_semil_ch2boosted.txt wv_semil_ch3boosted.txt wv_semil_ch4boosted.txt wv_semil_ch5boosted.txt wv_semil_ch6boosted.txt wv_semil_ch7boosted.txt wv_semil_muboosted.txt wv_semil_elboosted.txt wv_semil_elmuboosted.txt > wv_semil_ATLASCMScomb_f5_trG.txt
cp wv_semil_ATLASCMScomb_f5_trG.txt wv_semil_ATLASCMScomb_f5_adjustedUnc_trG.txt
text2workspace.py -m 126 wv_semil_ATLASCMScomb_f5_adjustedUnc_trG.txt -o Example_ATLASCMScomb_f5_adjustedUnc_trG.root -P CombinedEWKAnalysis.CommonTools.HagiwaraAndZeppenfeldTwoDimensionalModel_wz_adjustedUnc:dkglZModel_wz_adjustedUnc --PO channels=ch1,ch2,ch3,ch4,ch5,ch6,ch7,mu,el,elmu --PO range_dkg=-0.015,0.015 --PO range_lZ=-0.015,0.015

//list of all nuisances:
background_MC_syst,background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,even_background_DD_syst,l2nu2_ch5_background_DD_factor2p5_stat,l2nu2_ch5_background_MC_stat,l2nu2_ch5_signal_stat,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch6_signal_stat,l2nu2_ch7_background_DD_factor2p5_stat,l2nu2_ch7_background_MC_stat,l2nu2_ch7_signal_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch1_signal_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch2_signal_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch3_signal_stat,l4_ch4_background_DD_factor1p5_stat,l4_ch4_signal_stat,lumi_8TeV,odd_background_DD_syst,sig_other,signal_reco,signal_th


// freeze all except background_MC_syst:
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,even_background_DD_syst,l2nu2_ch5_background_DD_factor2p5_stat,l2nu2_ch5_background_MC_stat,l2nu2_ch5_signal_stat,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch6_signal_stat,l2nu2_ch7_background_DD_factor2p5_stat,l2nu2_ch7_background_MC_stat,l2nu2_ch7_signal_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch1_signal_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch2_signal_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch3_signal_stat,l4_ch4_background_DD_factor1p5_stat,l4_ch4_signal_stat,lumi_8TeV,odd_background_DD_syst,sig_other,signal_reco,signal_th | tee out_f5z_background_MC_systONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_MC_systONLY.root
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,even_background_DD_syst,l2nu2_ch5_background_DD_factor2p5_stat,l2nu2_ch5_background_MC_stat,l2nu2_ch5_signal_stat,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch6_signal_stat,l2nu2_ch7_background_DD_factor2p5_stat,l2nu2_ch7_background_MC_stat,l2nu2_ch7_signal_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch1_signal_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch2_signal_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch3_signal_stat,l4_ch4_background_DD_factor1p5_stat,l4_ch4_signal_stat,lumi_8TeV,odd_background_DD_syst,sig_other,signal_reco,signal_th | tee out_f5g_background_MC_systONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_MC_systONLY.root
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_MC_systONLY.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_MC_systONLY.root dkg

// freeze all except CMS bkg unc!:
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances background_MC_syst,even_background_DD_syst,l2nu2_ch5_background_DD_factor2p5_stat,l2nu2_ch5_background_MC_stat,l2nu2_ch5_signal_stat,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch6_signal_stat,l2nu2_ch7_background_DD_factor2p5_stat,l2nu2_ch7_background_MC_stat,l2nu2_ch7_signal_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch1_signal_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch2_signal_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch3_signal_stat,l4_ch4_background_DD_factor1p5_stat,l4_ch4_signal_stat,lumi_8TeV,odd_background_DD_syst,sig_other,signal_reco,signal_th 
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_CMSbkgONLY.root
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances background_MC_syst,even_background_DD_syst,l2nu2_ch5_background_DD_factor2p5_stat,l2nu2_ch5_background_MC_stat,l2nu2_ch5_signal_stat,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch6_signal_stat,l2nu2_ch7_background_DD_factor2p5_stat,l2nu2_ch7_background_MC_stat,l2nu2_ch7_signal_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch1_signal_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch2_signal_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch3_signal_stat,l4_ch4_background_DD_factor1p5_stat,l4_ch4_signal_stat,lumi_8TeV,odd_background_DD_syst,sig_other,signal_reco,signal_th
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_CMSbkgONLY.root
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_CMSbkgONLY.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_CMSbkgONLY.root dkg

// freeze all except background_DD_syst!:
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,background_MC_syst,l2nu2_ch5_background_DD_factor2p5_stat,l2nu2_ch5_background_MC_stat,l2nu2_ch5_signal_stat,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch6_signal_stat,l2nu2_ch7_background_DD_factor2p5_stat,l2nu2_ch7_background_MC_stat,l2nu2_ch7_signal_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch1_signal_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch2_signal_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch3_signal_stat,l4_ch4_background_DD_factor1p5_stat,l4_ch4_signal_stat,lumi_8TeV,sig_other,signal_reco,signal_th | tee out_f5z_bkg_DD_syst_ONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_DD_syst_ONLY.root
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,background_MC_syst,l2nu2_ch5_background_DD_factor2p5_stat,l2nu2_ch5_background_MC_stat,l2nu2_ch5_signal_stat,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch6_signal_stat,l2nu2_ch7_background_DD_factor2p5_stat,l2nu2_ch7_background_MC_stat,l2nu2_ch7_signal_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch1_signal_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch2_signal_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch3_signal_stat,l4_ch4_background_DD_factor1p5_stat,l4_ch4_signal_stat,lumi_8TeV,sig_other,signal_reco,signal_th | tee out_f5g_bkg_DD_syst_ONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_DD_syst_ONLY.root
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_DD_syst_ONLY.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_DD_syst_ONLY.root dkg

// freeze all except background_DD_syst!:
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances odd_background_DD_syst,even_background_DD_syst,background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,background_MC_syst,l2nu2_ch5_background_MC_stat,l2nu2_ch5_signal_stat,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch6_signal_stat,l2nu2_ch7_background_DD_factor2p5_stat,l2nu2_ch7_background_MC_stat,l2nu2_ch7_signal_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch1_signal_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch2_signal_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch3_signal_stat,l4_ch4_background_DD_factor1p5_stat,l4_ch4_signal_stat,lumi_8TeV,sig_other,signal_reco,signal_th | tee out_f5z_bkg_DD_stat_ONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_DD_stat_ONLY.root
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances odd_background_DD_syst,even_background_DD_syst,background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,background_MC_syst,l2nu2_ch5_background_MC_stat,l2nu2_ch5_signal_stat,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch6_signal_stat,l2nu2_ch7_background_DD_factor2p5_stat,l2nu2_ch7_background_MC_stat,l2nu2_ch7_signal_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch1_signal_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch2_signal_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch3_signal_stat,l4_ch4_background_DD_factor1p5_stat,l4_ch4_signal_stat,lumi_8TeV,sig_other,signal_reco,signal_th | tee out_f5g_bkg_DD_stat_ONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_DD_stat_ONLY.root
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_DD_stat_ONLY.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_DD_stat_ONLY.root dkg


// freeze all except background_MC_stat!:
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances l2nu2_ch5_background_DD_factor2p5_stat,odd_background_DD_syst,even_background_DD_syst,background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,background_MC_syst,l2nu2_ch5_signal_stat,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch6_signal_stat,l2nu2_ch7_background_DD_factor2p5_stat,l2nu2_ch7_signal_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch1_signal_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch2_signal_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch3_signal_stat,l4_ch4_background_DD_factor1p5_stat,l4_ch4_signal_stat,lumi_8TeV,sig_other,signal_reco,signal_th | tee out_f5z_bkg_MC_stat_ONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_MC_stat_ONLY.root
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances l2nu2_ch5_background_DD_factor2p5_stat,odd_background_DD_syst,even_background_DD_syst,background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,background_MC_syst,l2nu2_ch5_signal_stat,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch6_signal_stat,l2nu2_ch7_background_DD_factor2p5_stat,l2nu2_ch7_signal_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch1_signal_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch2_signal_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch3_signal_stat,l4_ch4_background_DD_factor1p5_stat,l4_ch4_signal_stat,lumi_8TeV,sig_other,signal_reco,signal_th | tee out_f5g_bkg_MC_stat_ONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_MC_stat_ONLY.root
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_MC_stat_ONLY.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_background_MC_stat_ONLY.root dkg

// freeze all except signal_stat!:
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances l2nu2_ch7_background_MC_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch5_background_MC_stat,l2nu2_ch5_background_DD_factor2p5_stat,odd_background_DD_syst,even_background_DD_syst,background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,background_MC_syst,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch7_background_DD_factor2p5_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch4_background_DD_factor1p5_stat,lumi_8TeV,sig_other,signal_reco,signal_th | tee out_f5z_signal_stat_ONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_signal_stat_ONLY.root
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances l2nu2_ch7_background_MC_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch5_background_MC_stat,l2nu2_ch5_background_DD_factor2p5_stat,odd_background_DD_syst,even_background_DD_syst,background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,background_MC_syst,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch7_background_DD_factor2p5_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch4_background_DD_factor1p5_stat,lumi_8TeV,sig_other,signal_reco,signal_th | tee out_f5g_signal_stat_ONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_signal_stat_ONLY.root
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_signal_stat_ONLY.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_signal_stat_ONLY.root dkg

// freeze all except signal_th!:
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances l4_ch4_signal_stat,l4_ch3_signal_stat,l4_ch2_signal_stat,l4_ch1_signal_stat,l2nu2_ch7_signal_stat,l2nu2_ch6_signal_stat,l2nu2_ch5_signal_stat,l2nu2_ch7_background_MC_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch5_background_MC_stat,l2nu2_ch5_background_DD_factor2p5_stat,odd_background_DD_syst,even_background_DD_syst,background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,background_MC_syst,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch7_background_DD_factor2p5_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch4_background_DD_factor1p5_stat,lumi_8TeV,sig_other,signal_reco | tee out_f5z_signal_th_ONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_signal_th_ONLY.root
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances l4_ch4_signal_stat,l4_ch3_signal_stat,l4_ch2_signal_stat,l4_ch1_signal_stat,l2nu2_ch7_signal_stat,l2nu2_ch6_signal_stat,l2nu2_ch5_signal_stat,l2nu2_ch7_background_MC_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch5_background_MC_stat,l2nu2_ch5_background_DD_factor2p5_stat,odd_background_DD_syst,even_background_DD_syst,background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,background_MC_syst,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch7_background_DD_factor2p5_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch4_background_DD_factor1p5_stat,lumi_8TeV,sig_other,signal_reco | tee out_f5g_signal_th_ONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_signal_th_ONLY.root
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_signal_th_ONLY.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_signal_th_ONLY.root dkg

// freeze all except lumi_8TeV!:
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances signal_th,l4_ch4_signal_stat,l4_ch3_signal_stat,l4_ch2_signal_stat,l4_ch1_signal_stat,l2nu2_ch7_signal_stat,l2nu2_ch6_signal_stat,l2nu2_ch5_signal_stat,l2nu2_ch7_background_MC_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch5_background_MC_stat,l2nu2_ch5_background_DD_factor2p5_stat,odd_background_DD_syst,even_background_DD_syst,background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,background_MC_syst,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch7_background_DD_factor2p5_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch4_background_DD_factor1p5_stat,sig_other,signal_reco | tee out_f5z_lumi_ONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_lumi_ONLY.root
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances signal_th,l4_ch4_signal_stat,l4_ch3_signal_stat,l4_ch2_signal_stat,l4_ch1_signal_stat,l2nu2_ch7_signal_stat,l2nu2_ch6_signal_stat,l2nu2_ch5_signal_stat,l2nu2_ch7_background_MC_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch5_background_MC_stat,l2nu2_ch5_background_DD_factor2p5_stat,odd_background_DD_syst,even_background_DD_syst,background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,background_MC_syst,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch7_background_DD_factor2p5_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch4_background_DD_factor1p5_stat,sig_other,signal_reco | tee out_f5g_lumi_ONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_lumi_ONLY.root
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_lumi_ONLY.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_lumi_ONLY.root dkg

// freeze all except ATLAS_reco!:
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P lZ --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances lumi_8TeV,signal_th,l4_ch4_signal_stat,l4_ch3_signal_stat,l4_ch2_signal_stat,l4_ch1_signal_stat,l2nu2_ch7_signal_stat,l2nu2_ch6_signal_stat,l2nu2_ch5_signal_stat,l2nu2_ch7_background_MC_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch5_background_MC_stat,l2nu2_ch5_background_DD_factor2p5_stat,odd_background_DD_syst,even_background_DD_syst,background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,background_MC_syst,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch7_background_DD_factor2p5_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch4_background_DD_factor1p5_stat,sig_other | tee out_f5z_ATLASsignalRECO_ONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_ATLASsignalRECO_ONLY.root
combine Example_ATLASCMScomb_f5_adjustedUnc_trG.root -M MultiDimFit -P dkg --floatOtherPOIs=0 --algo=grid --points=10001 --minimizerStrategy=2 --verbose 9 --freezeNuisances lumi_8TeV,signal_th,l4_ch4_signal_stat,l4_ch3_signal_stat,l4_ch2_signal_stat,l4_ch1_signal_stat,l2nu2_ch7_signal_stat,l2nu2_ch6_signal_stat,l2nu2_ch5_signal_stat,l2nu2_ch7_background_MC_stat,l2nu2_ch6_background_MC_stat,l2nu2_ch5_background_MC_stat,l2nu2_ch5_background_DD_factor2p5_stat,odd_background_DD_syst,even_background_DD_syst,background_elboosted_backshape,background_elmuboosted_backshape,background_muboosted_backshape,background_MC_syst,l2nu2_ch6_background_DD_factor2p5_stat,l2nu2_ch7_background_DD_factor2p5_stat,l4_ch1_background_DD_factor1p5_stat,l4_ch2_background_DD_factor1p5_stat,l4_ch3_background_DD_factor1p5_stat,l4_ch4_background_DD_factor1p5_stat,sig_other | tee out_f5g_ATLASsignalRECO_ONLY
cp higgsCombineTest.MultiDimFit.mH120.root higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_ATLASsignalRECO_ONLY.root
python build1DInterval_lZ.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5z_1D_ATLASCMScomb_f5_adjustedUnc_trG_ATLASsignalRECO_ONLY.root lZ
python build1DInterval_dkg.py -0.015 0.015 higgsCombineTest.MultiDimFit.mH120_f5g_1D_ATLASCMScomb_f5_adjustedUnc_trG_ATLASsignalRECO_ONLY.root dkg


